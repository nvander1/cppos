cmake_minimum_required(VERSION 3.1...3.11)

if(${CMAKE_VERSION} VERSION_LESS 3.12)
    cmake_policy(VERSION ${CMAKE_VERSION})
endif()

if (DEFINED ISA AND DEFINED HW)
    if (EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/arch/${ISA}/${HW}")
        message("Generating build for ${ISA}/${HW}")
    else()
        unset(ISA CACHE)
        unset(HW CACHE)
        message(FATAL_ERROR "Invalid platform!")
    endif()
else()
    unset(ISA CACHE)
    unset(HW CACHE)
    message(FATAL_ERROR "Need to specify platform!")
endif()
